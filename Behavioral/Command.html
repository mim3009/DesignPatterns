<!DOCTYPE html>
<html>
<head>
	<title></title>
</head>
<body>
<script type="text/javascript">
	function add(x, y) {
		return x + y;
	}
	function sub(x, y) {
		return x - y;
	}
	function mul(x, y) {
		return x * y;
	}
	function div(x, y) {
		return x / y;
	}

	class Command {
		constructor(execute, undo, value) {
			this.execute = execute;
			this.undo = undo;
			this.value = value;
		}
	}

	function AddComand(value) { return new Command(add, sub, value); }
	function SubComand(value) { return new Command(sub, add, value); }
	function MulComand(value) { return new Command(mul, div, value); }
	function DivComand(value) { return new Command(div, mul, value); }

	function Calculator() {
		let current = 0,
			commands = [];

		function action(command) {
			const name = command.execute.toString().substr(9, 3);
			return name.charAt(0).toUpperCase() + name.slice(1);
		}

		return {
			execute: (command) => {
				current = command.execute(current, command.value);
				commands.push(command);
				console.log(action(command) + ": " + command.value + " Result: " + current);
			},

			undo: () => {
				const command = commands.pop();
				current = command.undo(current, command.value);
				console.log("Undo " + action(command) + ": " + command.value + " Result: " + current);
			},

			getCurrentValue: () => {
				return current;
			}
		}
	}

	const calculator = new Calculator();

	calculator.execute(new AddComand(100));
	calculator.execute(new SubComand(24));
	calculator.execute(new MulComand(6));
	calculator.execute(new DivComand(2));

	calculator.undo();
	calculator.undo();

	console.log("\nValue: " + calculator.getCurrentValue());
</script>
</body>
</html>